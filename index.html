<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StockMaster Pro</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #50e3c2;
            --background-color: #f8f9fa;
            --text-color: #333;
            --border-color: #e0e0e0;
            --success-color: #5cb85c;
            --danger-color: #d9534f;
            --warning-color: #f0ad4e;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background-color: #ffffff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            text-decoration: none;
        }

        .logo img {
            width: 40px;
            height: 40px;
            margin-right: 10px;
        }

        .nav-links {
            display: flex;
            gap: 1rem;
        }

        .nav-links a {
            color: var(--text-color);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--primary-color);
        }

        main {
            margin-top: 60px;
            min-height: calc(100vh - 60px);
            padding: 2rem 0;
        }

        h1, h2 {
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .hero {
            background-color: var(--primary-color);
            color: #fff;
            text-align: center;
            padding: 4rem 0;
            margin-bottom: 2rem;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #fff;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto 2rem;
        }

        .cta-button {
            display: inline-block;
            background-color: var(--secondary-color);
            color: #fff;
            padding: 0.75rem 1.5rem;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .cta-button:hover {
            background-color: #3cc7a5;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .feature-card {
            background-color: #fff;
            border-radius: 5px;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }

        .feature-card h3 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        form {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }

        input, select, button {
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            font-size: 1rem;
        }

        button {
            cursor: pointer;
            background-color: var(--primary-color);
            color: white;
            border: none;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #3a7bc8;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background-color: #f1f3f5;
            font-weight: 600;
            cursor: pointer;
        }

        .low-stock {
            background-color: #fff3cd;
        }

        #alerts {
            background-color: var(--warning-color);
            color: #fff;
            padding: 1rem;
            margin-bottom: 2rem;
            border-radius: 5px;
        }

        #reports {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .report-card {
            background-color: #fff;
            border-radius: 5px;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }

        .report-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-top: 0.5rem;
        }

        

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }

        #data-viz {
            width: 100%;
            height: 60px;
            margin-bottom: 2rem;
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }

            .hero p {
                font-size: 1rem;
            }

            form {
                grid-template-columns: 1fr;
            }
        }
        

        #barcode-scanner {
            width: 100%;
            max-width: 300px;
            height: 200px;
            border: 2px solid #ccc;
            margin: 20px auto;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            cursor: pointer;
        }

        #charts-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
        }

        .chart {
            width: 45%;
            margin-bottom: 20px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        #notification-center {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 300px;
            z-index: 1000;
        }

        .notification {
            background-color: #f1f1f1;
            border-left: 4px solid #4CAF50;
            margin-bottom: 10px;
            padding: 10px;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        #export-options {
            margin-top: 20px;
        }

        #kanban-board {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }

        .kanban-column {
            flex: 1;
            margin: 0 10px;
            padding: 10px;
            background-color: #f1f1f1;
            border-radius: 5px;
        }

        .kanban-item {
            background-color: white;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 3px;
            cursor: move;
        }


        #data-visualization {
            margin-top: 20px;
        }

        .chart-container {
            width: 100%;
            height: 300px;
            margin-bottom: 20px;
        }

        body.dark-mode,
        body.dark-mode .report-card,
        body.dark-mode .h
         {
            background-color: #1a1a1a;
            color: #f0f0f0;
        }

        body.dark-mode .container,
        body.dark-mode .feature-card,
        body.dark-mode .modal-content,
        body.dark-mode input,
        body.dark-mode select,
        body.dark-mode button {
            background-color: #2a2a2a;
            color: #f0f0f0;
        }

        body.dark-mode .nav-links a,
        body.dark-mode .logo {
            color: #f0f0f0;
        }

        body.dark-mode th {
            background-color: #3a3a3a;
        }

        body.dark-mode .low-stock {
            background-color: #4a3030;
        }

        #dark-mode-toggle {
            position: fixed;
            top: 0px;
            right: 0px;
            z-index: 1001;
        }


    </style>
</head>
<body>
    <header id="h">
        <nav class="container">
            <a href="#" class="logo">
                <img src="https://imgs.search.brave.com/uHCQ684FfF9xo3HN4AaAb-XGxa1kbXO99D2Ib5-9R9w/rs:fit:500:0:0:0/g:ce/aHR0cHM6Ly90NC5m/dGNkbi5uZXQvanBn/LzA5LzE4LzIzLzgz/LzM2MF9GXzkxODIz/ODM5OF9wRVBBVEo5/bEJNYm5LcFozVjVa/Q2xORWlqaDN6dGN6/Qi5qcGc" alt="StockMaster Pro Logo">
                StockMaster Pro
            </a>
            <div class="nav-links">
                <a href="#" id="home-link">Home</a>
                <a href="#" id="inventory-link">Inventory</a>
                <a href="#" id="about-link">About</a>
                <a href="#" id="contact-link">Contact</a>
                <a href="#" id="faq-link">FAQ</a>
            </div>
        </nav>
    </header>
    <button id="dark-mode-toggle">Toggle Dark Mode</button>

    <main>
        <div id="home-page">
            <section class="hero">
                <div class="container">
                    <h1>Welcome to StockMaster Pro</h1>
                    <p>Streamline your inventory management with our powerful and intuitive system.</p>
                    <a href="#" class="cta-button" id="get-started-btn">Get Started</a>
                </div>
            </section>

            <section class="container">
                <h2>Key Features</h2>
                <div class="features">
                    <div class="feature-card">
                        <h3>Real-time Tracking</h3>
                        <p>Monitor your inventory levels in real-time with our advanced tracking system.</p>
                    </div>
                    <div class="feature-card">
                        <h3>Smart Alerts</h3>
                        <p>Receive instant notifications when stock levels are low or require attention.</p>
                    </div>
                    <div class="feature-card">
                        <h3>Insightful Reports</h3>
                        <p>Generate comprehensive reports to make data-driven decisions for your business.</p>
                    </div>
                    <div class="feature-card">
                        <h3>User-Friendly Interface</h3>
                        <p>Enjoy a sleek and intuitive interface designed for efficiency and ease of use.</p>
                    </div>
                    <div class="feature-card">
                        <h3>Batch Import/Export</h3>
                        <p>Easily import or export large amounts of inventory data with our batch processing feature.</p>
                    </div>
                    <div class="feature-card">
                        <h3>Category Management</h3>
                        <p>Organize your inventory with customizable categories for better organization and reporting.</p>
                    </div>
                    <div class="feature-card">
                        <h3>Sales Tracking</h3>
                        <p>Keep track of your sales and their impact on inventory levels with our integrated sales module.</p>
                    </div>
                    <div class="feature-card">
                        <h3>Data Visualization</h3>
                        <p>Visualize your inventory data with interactive charts and graphs for quick insights.</p>
                    </div>
                </div>
            </section>
        </div>

        <div id="inventory-page" style="display: none;">
            <div class="container">
                <h1>Inventory Management</h1>
                <div id="alerts"></div>
                <form id="item-form">
                    <input type="text" id="item-name" placeholder="Item Name" required>
                    <input type="number" id="item-quantity" placeholder="Quantity" required>
                    <input type="number" id="item-price" placeholder="Price" step="0.01" required>
                    <select id="item-category" required>
                        <option value="">Select Category</option>
                        <option value="Electronics">Electronics</option>
                        <option value="Clothing">Clothing</option>
                        <option value="Food">Food</option>
                        <option value="Books">Books</option>
                    </select>
                    <input type="number" id="item-reorder-level" placeholder="Reorder Level" required>
                    <button type="submit">Add Item</button>
                </form>

                <div id="reports"></div>

                <div id="data-viz"></div>

                
                <div id="barcode-scanner">Click to scan barcode</div>
                <div id="qr-scanner"></div>


                <div id="charts-container">
                    <div class="chart">
                        <canvas id="inventory-value-chart"></canvas>
                    </div>
                    <div class="chart">
                        <canvas id="category-distribution-chart"></canvas>
                    </div>
                    <div class="chart">
                        <canvas id="stock-levels-chart"></canvas>
                    </div>
                    <div class="chart">
                        <canvas id="sales-trend-chart"></canvas>
                    </div>
                </div>

                <div>
                    <input type="text" id="search" placeholder="Search items...">
                    <select id="category-filter">
                        <option value="">All Categories</option>
                        <option value="Electronics">Electronics</option>
                        <option value="Clothing">Clothing</option>
                        <option value="Food">Food</option>
                        <option value="Books">Books</option>
                    </select>
                    <button id="import-btn">Import Inventory</button>
                    <button id="export-btn">Export Inventory</button>
                    <button id="manage-categories-btn">Manage Categories</button>
                    <button id="sales-tracking-btn">Sales Tracking</button>
                </div>

                <table id="inventory-table">
                    <thead>
                        <tr>
                            <th data-sort="name">Item Name</th>
                            <th data-sort="quantity">Quantity</th>
                            <th data-sort="price">Price</th>
                            <th data-sort="category">Category</th>
                            <th data-sort="reorderLevel">Reorder Level</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>

        
            </div>
        </div>
        <div id="supplier-page" style="display: none;">
            <div class="container">
                <h1>Supplier Management</h1>
                <form id="supplier-form">
                    <input type="text" id="supplier-name" placeholder="Supplier Name" required>
                    <input type="email" id="supplier-email" placeholder="Supplier Email" required>
                    <input type="tel" id="supplier-phone" placeholder="Supplier Phone" required>
                    <button type="submit">Add Supplier</button>
                </form>
                <table id="supplier-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Phone</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div id="order-page" style="display: none;">
            <div class="container">
                <h1>Order Management</h1>
                <form id="order-form">
                    <select id="order-supplier" required></select>
                    <select id="order-item" required></select>
                    <input type="number" id="order-quantity" placeholder="Quantity" required>
                    <input type="date" id="order-date" required>
                    <button type="submit">Place Order</button>
                </form>
                <table id="order-table">
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Supplier</th>
                            <th>Item</th>
                            <th>Quantity</th>
                            <th>Date</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div id="about-page" style="display: none;">
            <div class="container">
                <h1>About StockMaster Pro</h1>
                <p>StockMaster Pro is a cutting-edge inventory management system designed to help businesses of all sizes streamline their operations and make data-driven decisions. Our platform offers a comprehensive suite of tools for tracking inventory, managing stock levels, and analyzing sales data.</p>
                <h2>Our Mission</h2>
                <p>Our mission is to empower businesses with the tools they need to optimize their inventory management processes, reduce costs, and improve efficiency. We believe that with the right technology, any business can achieve operational excellence.</p>
                <h2>Key Benefits</h2>
                <ul>
                    <li>Real-time inventory tracking</li>
                    <li>Automated low stock alerts</li>
                    <li>Customizable reporting and analytics</li>
                    <li>User-friendly interface</li>
                    <li>Seamless integration with existing systems</li>
                    <li>Cloud-based solution for access anywhere, anytime</li>
                </ul>
            </div>
        </div>

        <div id="contact-page" style="display: none;">
            <div class="container">
                <h1>Contact Us</h1>
                <p>We're here to help! If you have any questions, concerns, or feedback about StockMaster Pro, please don't hesitate to reach out to us.</p>
                <div class="contact-info">
                    <h2>Contact Information</h2>
                    <p><strong>Email:</strong> support@stockmasterpro.com</p>
                    <p><strong>Phone:</strong> +1 (555) 123-4567</p>
                    <p><strong>Address:</strong> 123 Inventory Lane, Stock City, ST 12345</p>
                </div>
                <form id="contact-form">
                    <input type="text" id="contact-name" placeholder="Your Name" required>
                    <input type="email" id="contact-email" placeholder="Your Email" required>
                    <textarea id="contact-message" placeholder="Your Message" required></textarea>
                    <button type="submit">Send Message</button>
                </form>
            </div>
        </div>

        <div id="faq-page" style="display: none;">
            <div class="container">
                <h1>Frequently Asked Questions</h1>
                <div class="faq-list">
                    <div class="faq-item">
                        <h2>What is StockMaster Pro?</h2>
                        <p>StockMaster Pro is a comprehensive inventory management system designed to help businesses track, manage, and optimize their inventory.</p>
                    </div>
                    <div class="faq-item">
                        <h2>How do I get started with StockMaster Pro?</h2>
                        <p>To get started, simply sign up for an account on our website. Once you've created your account, you can begin adding your inventory items and customizing your settings.</p>
                    </div>
                    <div class="faq-item">
                        <h2>Is StockMaster Pro cloud-based?</h2>
                        <p>Yes, StockMaster Pro is a cloud-based solution, which means you can access your inventory data from anywhere with an internet connection.</p>
                    </div>
                    <div class="faq-item">
                        <h2>Can I import my existing inventory data?</h2>
                        <p>Yes, StockMaster Pro supports importing inventory data from CSV or JSON files. You can easily migrate your existing data into our system.</p>
                    </div>
                </div>
            </div>
        </div>
        <div id="task-page" style="display: none;">
            <div class="container">
                <h1>Task Management</h1>
                <form id="task-form">
                    <input type="text" id="task-title" placeholder="Task Title" required>
                    <textarea id="task-description" placeholder="Task Description" required></textarea>
                    <select id="task-priority" required>
                        <option value="">Select Priority</option>
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                    </select>
                    <input type="date" id="task-due-date" required>
                    <button type="submit">Add Task</button>
                </form>
                <div id="kanban-board">
                    <div class="kanban-column" id="todo">
                        <h2>To Do</h2>
                    </div>
                    <div class="kanban-column" id="in-progress">
                        <h2>In Progress</h2>
                    </div>
                    <div class="kanban-column" id="done">
                        <h2>Done</h2>
                    </div>
                </div>
            </div>
        </div>

        <div id="analytics-page" style="display: none;">
            <div class="container">
                <h1>Analytics Dashboard</h1>
                <div id="analytics-charts">
                    <div class="chart-container">
                        <canvas id="sales-by-category-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <canvas id="inventory-turnover-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="notification-center"></div>

    <!-- Add modals for new features -->
    <div id="import-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Import Data</h2>
            <input type="file" id="import-file" accept=".csv, .json">
            <button id="import-button">Import</button>
        </div>
    </div>

    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Edit Item</h2>
            <form id="edit-form">
                <input type="text" id="edit-name" required>
                <input type="number" id="edit-quantity" required>
                <input type="number" id="edit-price" step="0.01" required>
                <select id="edit-category" required>
                    <option value="Electronics">Electronics</option>
                    <option value="Clothing">Clothing</option>
                    <option value="Food">Food</option>
                    <option value="Books">Books</option>
                </select>
                <input type="number" id="edit-reorder-level" required>
                <button type="submit">Update Item</button>
            </form>
        </div>
    </div>


    

    <div id="inventory-map"></div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/@zxing/library@latest"></script>
    <script>

        // Initialize inventory from localStorage or empty array
        let inventory = JSON.parse(localStorage.getItem('inventory')) || [];

        const homePage = document.getElementById('home-page');
        const inventoryPage = document.getElementById('inventory-page');
        const aboutPage = document.getElementById('about-page');
        const contactPage = document.getElementById('contact-page');
        const faqPage = document.getElementById('faq-page');
        const homeLink = document.getElementById('home-link');
        const inventoryLink = document.getElementById('inventory-link');
        const aboutLink = document.getElementById('about-link');
        const contactLink = document.getElementById('contact-link');
        const faqLink = document.getElementById('faq-link');
        const getStartedBtn = document.getElementById('get-started-btn');

        const itemForm = document.getElementById('item-form');
        const inventoryTable = document.getElementById('inventory-table').getElementsByTagName('tbody')[0];
        const alertsContainer = document.getElementById('alerts');
        const reportsContainer = document.getElementById('reports');
        const searchInput = document.getElementById('search');
        const categoryFilter = document.getElementById('category-filter');
        const editModal = document.getElementById('editModal');
        const editForm = document.getElementById('edit-form');
        const closeModal = document.getElementsByClassName('close')[0];

        const importBtn = document.getElementById('import-btn');
        const exportBtn = document.getElementById('export-btn');
        const manageCategoriesBtn = document.getElementById('manage-categories-btn');
        const salesTrackingBtn = document.getElementById('sales-tracking-btn');

        let currentSort = { column: 'name', direction: 'asc' };
        let editingIndex = -1;

        // Navigation
        function showPage(pageId) {
            [homePage, inventoryPage, aboutPage, contactPage, faqPage].forEach(page => {
                page.style.display = page.id === pageId ? 'block' : 'none';
            });
            if (pageId === 'inventory-page') {
                renderInventory();
                renderDataVisualization();
            }
        }

        homeLink.addEventListener('click', () => showPage('home-page'));
        inventoryLink.addEventListener('click', () => showPage('inventory-page'));
        aboutLink.addEventListener('click', () => showPage('about-page'));
        contactLink.addEventListener('click', () => showPage('contact-page'));
        faqLink.addEventListener('click', () => showPage('faq-page'));
        getStartedBtn.addEventListener('click', () => showPage('inventory-page'));

        // Function to render inventory table
        function renderInventory() {
            const filteredInventory = inventory.filter(item => 
                item.name.toLowerCase().includes(searchInput.value.toLowerCase()) &&
                (categoryFilter.value === '' || item.category === categoryFilter.value)
            );

            inventoryTable.innerHTML = '';
            filteredInventory.forEach((item, index) => {
                const row = inventoryTable.insertRow();
                row.innerHTML = `
                    <td>${item.name}</td>
                    <td>${item.quantity}</td>
                    <td>$${item.price.toFixed(2)}</td>
                    <td>${item.category}</td>
                    <td>${item.reorderLevel}</td>
                    <td>
                        <button onclick="updateItem(${index}, 1)">+</button>
                        <button onclick="updateItem(${index}, -1)">-</button>
                        <button onclick="editItem(${index})">Edit</button>
                        <button onclick="removeItem(${index})">Remove</button>
                        <button onclick="sellItem(${index})">Sell</button>
                    </td>
                `;
                if (item.quantity <= item.reorderLevel) {
                    row.classList.add('low-stock');
                }
            });

            // Save to localStorage
            localStorage.setItem('inventory', JSON.stringify(inventory));

            // Update alerts and reports
            updateAlerts();
            updateReports();
        }

        // Add new item
        itemForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('item-name').value.trim();
            const quantity = parseInt(document.getElementById('item-quantity').value);
            const price = parseFloat(document.getElementById('item-price').value);
            const category = document.getElementById('item-category').value;
            const reorderLevel = parseInt(document.getElementById('item-reorder-level').value);

            if (name && quantity && price && category && reorderLevel) {
                inventory.push({ name, quantity, price, category, reorderLevel });
                itemForm.reset();
                renderInventory();
                renderDataVisualization();
            }
        });

        // Update item quantity
        function updateItem(index, change) {
            inventory[index].quantity += change;
            if (inventory[index].quantity < 0) inventory[index].quantity = 0;
            renderInventory();
            renderDataVisualization();
        }

        // Remove item
        function removeItem(index) {
            inventory.splice(index, 1);
            renderInventory();
            renderDataVisualization();
        }

        // Edit item
        function editItem(index) {
            editingIndex = index;
            const item = inventory[index];
            document.getElementById('edit-name').value = item.name;
            document.getElementById('edit-quantity').value = item.quantity;
            document.getElementById('edit-price').value = item.price;
            document.getElementById('edit-category').value = item.category;
            document.getElementById('edit-reorder-level').value = item.reorderLevel;
            editModal.style.display = 'block';
        }

        // Sell item
        function sellItem(index) {
            if (inventory[index].quantity > 0) {
                inventory[index].quantity--;
                renderInventory();
                renderDataVisualization();
            } else {
                alert('This item is out of stock!');
            }
        }

        // Update item after editing
        editForm.addEventListener('submit', (e) => {
            e.preventDefault();
            if (editingIndex > -1) {
                inventory[editingIndex] = {
                    name: document.getElementById('edit-name').value.trim(),
                    quantity: parseInt(document.getElementById('edit-quantity').value),
                    price: parseFloat(document.getElementById('edit-price').value),
                    category: document.getElementById('edit-category').value,
                    reorderLevel: parseInt(document.getElementById('edit-reorder-level').value)
                };
                editModal.style.display = 'none';
                renderInventory();
                renderDataVisualization();
            }
        });

        // Close modal
        closeModal.onclick = () => editModal.style.display = 'none';
        window.onclick = (event) => {
            if (event.target == editModal) {
                editModal.style.display = 'none';
            }
        };

        // Update alerts
        function updateAlerts() {
            const lowStockItems = inventory.filter(item => item.quantity <= item.reorderLevel);
            if (lowStockItems.length > 0) {
                alertsContainer.innerHTML = `<strong>Low Stock Alert:</strong> ${lowStockItems.map(item => item.name).join(', ')}`;
                alertsContainer.style.display = 'block';
            } else {
                alertsContainer.style.display = 'none';
            }
        }

        // Update reports
        function updateReports() {
            const totalItems = inventory.reduce((sum, item) => sum + item.quantity, 0);
            const totalValue = inventory.reduce((sum, item) => sum + item.quantity * item.price, 0);
            const lowStockItems = inventory.filter(item => item.quantity <= item.reorderLevel).length;
            const categories = [...new Set(inventory.map(item => item.category))];

            reportsContainer.innerHTML = `
                <div class="report-card">
                    <h3>Total Items</h3>
                    <div class="report-value">${totalItems}</div>
                </div>
                <div class="report-card">
                    <h3>Total Value</h3>
                    <div class="report-value">$${totalValue.toFixed(2)}</div>
                </div>
                <div class="report-card">
                    <h3>Low Stock Items</h3>
                    <div class="report-value">${lowStockItems}</div>
                </div>
                <div class="report-card">
                    <h3>Categories</h3>
                    <div class="report-value">${categories.length}</div>
                </div>
            `;
        }

        // Sorting
        document.querySelectorAll('th[data-sort]').forEach(th => {
            th.addEventListener('click', () => {
                const column = th.dataset.sort;
                if (currentSort.column === column) {
                    currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
                } else {
                    currentSort.column = column;
                    currentSort.direction = 'asc';
                }
                inventory.sort((a, b) => {
                    if (a[column] < b[column]) return currentSort.direction === 'asc' ? -1 : 1;
                    if (a[column] > b[column]) return currentSort.direction === 'asc' ? 1 : -1;
                    return 0;
                });
                renderInventory();
            });
        });

        // Search and filter
        searchInput.addEventListener('input', renderInventory);
        categoryFilter.addEventListener('change', renderInventory);

        // Import inventory
        importBtn.addEventListener('click', () => {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                reader.onload = event => {
                    try {
                        const importedInventory = JSON.parse(event.target.result);
                        inventory = importedInventory;
                        renderInventory();
                        renderDataVisualization();
                        alert('Inventory imported successfully!');
                    } catch (error) {
                        alert('Error importing inventory. Please check the file format.');
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        });

        // Export inventory
        exportBtn.addEventListener('click', () => {
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(inventory));
            const downloadAnchorNode = document.createElement('a');
            downloadAnchorNode.setAttribute("href", dataStr);
            downloadAnchorNode.setAttribute("download", "inventory_export.json");
            document.body.appendChild(downloadAnchorNode);
            downloadAnchorNode.click();
            downloadAnchorNode.remove();
        });

        // Manage categories
        manageCategoriesBtn.addEventListener('click', () => {
            const categories = [...new Set(inventory.map(item => item.category))];
            const newCategory = prompt('Enter a new category name:');
            if (newCategory && !categories.includes(newCategory)) {
                const categorySelect = document.getElementById('item-category');
                const option = document.createElement('option');
                option.value = newCategory;
                option.textContent = newCategory;
                categorySelect.appendChild(option);
                alert(`Category "${newCategory}" has been added.`);
            } else if (categories.includes(newCategory)) {
                alert('This category already exists.');
            }
        });

        // Sales tracking
        salesTrackingBtn.addEventListener('click', () => {
            const salesReport = inventory.map(item => ({
                name: item.name,
                sold: item.quantity,
                revenue: item.quantity * item.price
            }));
            console.log('Sales Report:', salesReport);
            alert('Sales report has been generated. Check the console for details.');
        });

        // Data visualization
        function renderDataVisualization() {
            const ctx = document.getElementById('data-viz').getContext('2d');
            const categoryData = {};
            inventory.forEach(item => {
                if (categoryData[item.category]) {
                    categoryData[item.category] += item.quantity;
                } else {
                    categoryData[item.category] = item.quantity;
                }
            });

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(categoryData),
                    datasets: [{
                        label: 'Items per Category',
                        data: Object.values('categoryCategory'),
                        backgroundColor: 'rgba(74, 144, 226, 0.6)',
                        borderColor: 'rgba(74, 144, 226, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Improved routing mechanism
        function navigateTo(pageId) {
            showPage(pageId);
            window.history.pushState({ pageId }, '', `#${pageId}`);
        }

        window.addEventListener('popstate', (event) => {
            if (event.state && event.state.pageId) {
                showPage(event.state.pageId);
            }
        });

        // Update event listeners for navigation
        homeLink.addEventListener('click', (e) => {
            e.preventDefault();
            navigateTo('home-page');
        });
        inventoryLink.addEventListener('click', (e) => {
            e.preventDefault();
            navigateTo('inventory-page');
        });
        aboutLink.addEventListener('click', (e) => {
            e.preventDefault();
            navigateTo('about-page');
        });
        contactLink.addEventListener('click', (e) => {
            e.preventDefault();
            navigateTo('contact-page');
        });
        faqLink.addEventListener('click', (e) => {
            e.preventDefault();
            navigateTo('faq-page');
        });
        getStartedBtn.addEventListener('click', (e) => {
            e.preventDefault();
            navigateTo('inventory-page');
        });

        // Add a new feature: Bulk update of reorder levels
        function bulkUpdateReorderLevels() {
            const newReorderLevel = prompt("Enter the new reorder level for all items:");
            if (newReorderLevel !== null && !isNaN(newReorderLevel)) {
                inventory = inventory.map(item => ({
                    ...item,
                    reorderLevel: parseInt(newReorderLevel)
                }));
                renderInventory();
                alert("Reorder levels have been updated for all items.");
            }
        }

        // Add a new feature: Generate a PDF report
        function generatePDFReport() {
            const reportContent = `
                StockMaster Pro Inventory Report
                Date: ${new Date().toLocaleDateString()}
                
                Total Items: ${inventory.reduce((sum, item) => sum + item.quantity, 0)}
                Total Value: $${inventory.reduce((sum, item) => sum + item.quantity * item.price, 0).toFixed(2)}
                
                Inventory Details:
                ${inventory.map(item => `
                    - ${item.name}
                    Quantity: ${item.quantity}
                    Price: $${item.price.toFixed(2)}
                    Category: ${item.category}
                    Reorder Level: ${item.reorderLevel}
                `).join('\n')}
            `;
            
            const blob = new Blob([reportContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'inventory_report.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Add new buttons to the inventory page
        const inventoryActions = document.createElement('div');
        inventoryActions.innerHTML = `
            <button id="bulk-update-btn">Bulk Update Reorder Levels</button>
            <button id="generate-report-btn">Generate Report</button>
        `;
        document.querySelector('#inventory-page .container').insertBefore(inventoryActions, document.getElementById('item-form'));

        document.getElementById('bulk-update-btn').addEventListener('click', bulkUpdateReorderLevels);
        document.getElementById('generate-report-btn').addEventListener('click', generatePDFReport);

        // Enhance the contact form submission
        const contactForm = document.getElementById('contact-form');
        contactForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('contact-name').value;
            const email = document.getElementById('contact-email').value;
            const message = document.getElementById('contact-message').value;
            
            // Simulate form submission
            alert(`Thank you, ${name}! Your message has been sent. We'll get back to you at ${email} soon.`);
            contactForm.reset();
        });

        // Add FAQ accordion functionality
        const faqItems = document.querySelectorAll('.faq-item');
        faqItems.forEach(item => {
            const question = item.querySelector('h2');
            const answer = item.querySelector('p');
            answer.style.display = 'none';
            
            question.addEventListener('click', () => {
                answer.style.display = answer.style.display === 'none' ? 'block' : 'none';
            });
        });

        

        // Add new variables and data structures
        let suppliers = JSON.parse(localStorage.getItem('suppliers')) || [];
        let orders = JSON.parse(localStorage.getItem('orders')) || [];
        let inventoryHistory = JSON.parse(localStorage.getItem('inventoryHistory')) || [];

        const supplierPage = document.getElementById('supplier-page');
        const orderPage = document.getElementById('order-page');
        const supplierForm = document.getElementById('supplier-form');
        const supplierTable = document.getElementById('supplier-table').getElementsByTagName('tbody')[0];
        const orderForm = document.getElementById('order-form');
        const orderTable = document.getElementById('order-table').getElementsByTagName('tbody')[0];
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const barcodeScanner = document.getElementById('barcode-scanner');

        // Update navigation
        const supplierLink = document.createElement('a');
        supplierLink.href = '#';
        supplierLink.id = 'supplier-link';
        supplierLink.textContent = 'Suppliers';
        document.querySelector('.nav-links').appendChild(supplierLink);

        const orderLink = document.createElement('a');
        orderLink.href = '#';
        orderLink.id = 'order-link';
        orderLink.textContent = 'Orders';
        document.querySelector('.nav-links').appendChild(orderLink);

        // Update showPage function
        function showPage(pageId) {
            [homePage, inventoryPage, aboutPage, contactPage, faqPage, supplierPage, orderPage].forEach(page => {
                page.style.display = page.id === pageId ? 'block' : 'none';
            });
            if (pageId === 'inventory-page') {
                renderInventory();
                renderCharts();
            } else if (pageId === 'supplier-page') {
                renderSuppliers();
            } else if (pageId === 'order-page') {
                renderOrders();
            }
        }

        // Add event listeners for new navigation items
        supplierLink.addEventListener('click', (e) => {
            e.preventDefault();
            navigateTo('supplier-page');
        });

        orderLink.addEventListener('click', (e) => {
            e.preventDefault();
            navigateTo('order-page');
        });

        // Supplier management
        supplierForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('supplier-name').value.trim();
            const email = document.getElementById('supplier-email').value.trim();
            const phone = document.getElementById('supplier-phone').value.trim();

            if (name && email && phone) {
                suppliers.push({ name, email, phone });
                supplierForm.reset();
                renderSuppliers();
                updateLocalStorage();
            }
        });

        function renderSuppliers() {
            supplierTable.innerHTML = '';
            suppliers.forEach((supplier, index) => {
                const row = supplierTable.insertRow();
                row.innerHTML = `
                    <td>${supplier.name}</td>
                    <td>${supplier.email}</td>
                    <td>${supplier.phone}</td>
                    <td>
                        <button onclick="editSupplier(${index})">Edit</button>
                        <button onclick="removeSupplier(${index})">Remove</button>
                    </td>
                `;
            });
        }

        function editSupplier(index) {
            const supplier = suppliers[index];
            const newName = prompt('Enter new name:', supplier.name);
            const newEmail = prompt('Enter new email:', supplier.email);
            const newPhone = prompt('Enter new phone:', supplier.phone);

            if (newName && newEmail && newPhone) {
                suppliers[index] = { name: newName, email: newEmail, phone: newPhone };
                renderSuppliers();
                updateLocalStorage();
            }
        }

        function removeSupplier(index) {
            if (confirm('Are you sure you want to remove this supplier?')) {
                suppliers.splice(index, 1);
                renderSuppliers();
                updateLocalStorage();
            }
        }

        // Order management
        orderForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const supplierId = document.getElementById('order-supplier').value;
            const itemId = document.getElementById('order-item').value;
            const quantity = parseInt(document.getElementById('order-quantity').value);
            const date = document.getElementById('order-date').value;

            if (supplierId && itemId && quantity && date) {
                const orderId = Date.now().toString(36) + Math.random().toString(36).substr(2);
                orders.push({ id: orderId, supplierId, itemId, quantity, date, status: 'Pending' });
                orderForm.reset();
                renderOrders();
                updateLocalStorage();
            }
        });

        function renderOrders() {
            orderTable.innerHTML = '';
            orders.forEach((order, index) => {
                const row = orderTable.insertRow();
                const supplier = suppliers.find(s => s.name === order.supplierId);
                const item = inventory.find(i => i.name === order.itemId);
                row.innerHTML = `
                    <td>${order.id}</td>
                    <td>${supplier ? supplier.name : 'N/A'}</td>
                    <td>${item ? item.name : 'N/A'}</td>
                    <td>${order.quantity}</td>
                    <td>${order.date}</td>
                    <td>${order.status}</td>
                    <td>
                        <button onclick="updateOrderStatus(${index})">Update Status</button>
                        <button onclick="removeOrder(${index})">Remove</button>
                    </td>
                `;
            });

            // Update supplier and item dropdowns
            const supplierSelect = document.getElementById('order-supplier');
            const itemSelect = document.getElementById('order-item');

            supplierSelect.innerHTML = '';
            suppliers.forEach(supplier => {
                const option = document.createElement('option');
                option.value = supplier.name;
                option.textContent = supplier.name;
                supplierSelect.appendChild(option);
            });

            itemSelect.innerHTML = '';
            inventory.forEach(item => {
                const option = document.createElement('option');
                option.value = item.name;
                option.textContent = item.name;
                itemSelect.appendChild(option);
            });
        }

        function updateOrderStatus(index) {
            const newStatus = prompt('Enter new status (Pending, Shipped, Delivered):');
            if (newStatus && ['Pending', 'Shipped', 'Delivered'].includes(newStatus)) {
                orders[index].status = newStatus;
                renderOrders();
                updateLocalStorage();
            }
        }

        function removeOrder(index) {
            if (confirm('Are you sure you want to remove this order?')) {
                orders.splice(index, 1);
                renderOrders();
                updateLocalStorage();
            }
        }

        // Barcode scanning simulation
        barcodeScanner.addEventListener('click', () => {
            const barcode = prompt('Enter barcode:');
            if (barcode) {
                const item = inventory.find(i => i.name.toLowerCase().includes(barcode.toLowerCase()));
                if (item) {
                    alert(`Item found: ${item.name}\nQuantity: ${item.quantity}\nPrice: $${item.price}`);
                } else {
                    alert('Item not found');
                }
            }
        });

        // Dark mode toggle
        darkModeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        });

        // Check for saved dark mode preference
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
        }

        // Enhanced data visualization
        function renderCharts() {
            renderInventoryValueChart();
            renderCategoryDistributionChart();
            renderStockLevelsChart();
            renderSalesTrendChart();
        }

        function renderInventoryValueChart() {
            const ctx = document.getElementById('inventory-value-chart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: inventoryHistory.map(h => new Date(h.date).toLocaleDateString()),
                    datasets: [{
                        label: 'Total Inventory Value',
                        data: inventoryHistory.map(h => h.value),
                        borderColor: 'rgba(75, 192, 192, 1)',
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function renderCategoryDistributionChart() {
            const ctx = document.getElementById('category-distribution-chart').getContext('2d');
            const categoryData = {};
            inventory.forEach(item => {
                if (categoryData[item.category]) {
                    categoryData[item.category] += item.quantity;
                } else {
                    categoryData[item.category] = item.quantity;
                }
            });

            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: Object.keys(categoryData),
                    datasets: [{
                        data: Object.values(categoryData),
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.8)',
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(255, 206, 86, 0.8)',
                            'rgba(75, 192, 192, 0.8)',
                            'rgba(153, 102, 255, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Category Distribution'
                        }
                    }
                }
            });
        }

        function renderStockLevelsChart() {
            const ctx = document.getElementById('stock-levels-chart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: inventory.map(item => item.name),
                    datasets: [{
                        label: 'Current Stock',
                        data: inventory.map(item => item.quantity),
                        backgroundColor: 'rgba(75, 192, 192, 0.8)'
                    }, {
                        label: 'Reorder Level',
                        data: inventory.map(item => item.reorderLevel),
                        backgroundColor: 'rgba(255, 99, 132, 0.8)'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function renderSalesTrendChart() {
            const ctx = document.getElementById('sales-trend-chart').getContext('2d');
            const salesData = generateMockSalesData();

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: salesData.map(d => d.date),
                    datasets: [{
                        label: 'Daily Sales',
                        data: salesData.map(d => d.sales),
                        borderColor: 'rgba(255, 159, 64, 1)',
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function generateMockSalesData() {
            const salesData = [];
            const today = new Date();
            for (let i = 30; i > 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                salesData.push({
                    date: date.toLocaleDateString(),
                    sales: Math.floor(Math.random() * 1000) + 500
                });
            }
            return salesData;
        }

        // Update inventory history
        function updateInventoryHistory() {
            const totalValue = inventory.reduce((sum, item) => sum + item.quantity * item.price, 0);
            inventoryHistory.push({ date: new Date().toISOString(), value: totalValue });
            if (inventoryHistory.length > 30) {
                inventoryHistory.shift();
            }
            updateLocalStorage();
        }

        // Update local storage
        function updateLocalStorage() {
            localStorage.setItem('inventory', JSON.stringify(inventory));
            localStorage.setItem('suppliers', JSON.stringify(suppliers));
            localStorage.setItem('orders', JSON.stringify(orders));
            localStorage.setItem('inventoryHistory', JSON.stringify(inventoryHistory));
        }


        // Add new variables and data structures
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        const taskPage = document.getElementById('task-page');
        const taskForm = document.getElementById('task-form');
        const kanbanBoard = document.getElementById('kanban-board');
        const analyticsPage = document.getElementById('analytics-page');

        // Update navigation
        const taskLink = document.createElement('a');
        taskLink.href = '#';
        taskLink.id = 'task-link';
        taskLink.textContent = 'Tasks';
        document.querySelector('.nav-links').appendChild(taskLink);

        const analyticsLink = document.createElement('a');
        analyticsLink.href = '#';
        analyticsLink.id = 'analytics-link';
        analyticsLink.textContent = 'Analytics';
        document.querySelector('.nav-links').appendChild(analyticsLink);

        // Update showPage function
        function showPage(pageId) {
            [homePage, inventoryPage, aboutPage, contactPage, faqPage, supplierPage, orderPage, taskPage, analyticsPage].forEach(page => {
                page.style.display = page.id === pageId ? 'block' : 'none';
            });
            if (pageId === 'inventory-page') {
                renderInventory();
                renderCharts();
            } else if (pageId === 'supplier-page') {
                renderSuppliers();
            } else if (pageId === 'order-page') {
                renderOrders();
            } else if (pageId === 'task-page') {
                renderTasks();
            } else if (pageId === 'analytics-page') {
                renderAnalytics();
            }
        }

        // Add event listeners for new navigation items
        taskLink.addEventListener('click', (e) => {
            e.preventDefault();
            navigateTo('task-page');
        });

        analyticsLink.addEventListener('click', (e) => {
            e.preventDefault();
            navigateTo('analytics-page');
        });

        // Task management
        taskForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const title = document.getElementById('task-title').value.trim();
            const description = document.getElementById('task-description').value.trim();
            const priority = document.getElementById('task-priority').value;
            const dueDate = document.getElementById('task-due-date').value;

            if (title && description && priority && dueDate) {
                tasks.push({ id: Date.now(), title, description, priority, dueDate, status: 'todo' });
                taskForm.reset();
                renderTasks();
                updateLocalStorage();
                showNotification('Task added successfully');
            }
        });

        function renderTasks() {
            ['todo', 'in-progress', 'done'].forEach(status => {
                const column = document.getElementById(status);
                column.innerHTML = `<h2>${status.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}</h2>`;
                tasks.filter(task => task.status === status).forEach(task => {
                    const taskElement = document.createElement('div');
                    taskElement.className = 'kanban-item';
                    taskElement.draggable = true;
                    taskElement.innerHTML = `
                        <h3>${task.title}</h3>
                        <p>${task.description}</p>
                        <p>Priority: ${task.priority}</p>
                        <p>Due: ${task.dueDate}</p>
                        <button onclick="removeTask(${task.id})">Remove</button>
                    `;
                    taskElement.addEventListener('dragstart', drag);
                    column.appendChild(taskElement);
                });
            });
        }

        function removeTask(id) {
            tasks = tasks.filter(task => task.id !== id);
            renderTasks();
            updateLocalStorage();
            showNotification('Task removed successfully');
        }

        // Drag and drop functionality for Kanban board
        function drag(e) {
            e.dataTransfer.setData('text', e.target.innerHTML);
            e.dataTransfer.setData('taskId', e.target.querySelector('button').getAttribute('onclick').match(/\d+/)[0]);
        }

        ['todo', 'in-progress', 'done'].forEach(status => {
            const column = document.getElementById(status);
            column.addEventListener('dragover', allowDrop);
            column.addEventListener('drop', drop);
        });

        function allowDrop(e) {
            e.preventDefault();
        }

        function drop(e) {
            e.preventDefault();
            const taskId = parseInt(e.dataTransfer.getData('taskId'));
            const newStatus = e.target.closest('.kanban-column').id;
            const taskIndex = tasks.findIndex(task => task.id === taskId);
            if (taskIndex !== -1) {
                tasks[taskIndex].status = newStatus;
                renderTasks();
                updateLocalStorage();
                showNotification('Task status updated');
            }
        }

        // Export functionality
        document.getElementById('export-csv').addEventListener('click', () => exportData('csv'));
        document.getElementById('export-json').addEventListener('click', () => exportData('json'));

        function exportData(format) {
            let content, filename, mimeType;

            if (format === 'csv') {
                content = 'Name,Category,Quantity,Price,Reorder Level\n';
                content += inventory.map(item => `${item.name},${item.category},${item.quantity},${item.price},${item.reorderLevel}`).join('\n');
                filename = 'inventory.csv';
                mimeType = 'text/csv;charset=utf-8;';
            } else if (format === 'json') {
                content = JSON.stringify(inventory, null, 2);
                filename = 'inventory.json';
                mimeType = 'application/json;charset=utf-8;';
            }

            const blob = new Blob([content], { type: mimeType });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            link.click();
            URL.revokeObjectURL(link.href);
            showNotification(`Inventory exported as ${format.toUpperCase()}`);
        }

        // Import functionality
        const importModal = document.getElementById('import-modal');
        const importButton = document.getElementById('import-button');
        const importFile = document.getElementById('import-file');

        document.getElementById('inventory-actions').innerHTML += '<button id="import-data">Import Data</button>';
        document.getElementById('import-data').addEventListener('click', () => importModal.style.display = 'block');

        importButton.addEventListener('click', () => {
            const file = importFile.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        if (file.name.endsWith('.csv')) {
                            const csvData = e.target.result.split('\n').slice(1);
                            inventory = csvData.map(row => {
                                const [name, category, quantity, price, reorderLevel] = row.split(',');
                                return { name, category, quantity: parseInt(quantity), price: parseFloat(price), reorderLevel: parseInt(reorderLevel) };
                            });
                        } else if (file.name.endsWith('.json')) {
                            inventory = JSON.parse(e.target.result);
                        }
                        renderInventory();
                        updateLocalStorage();
                        importModal.style.display = 'none';
                        showNotification('Data imported successfully');
                    } catch (error) {
                        showNotification('Error importing data', 'error');
                    }
                };
                reader.readAsText(file);
            }
        });

        // Notification system
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.getElementById('notification-center').appendChild(notification);
            setTimeout(() => notification.remove(), 5000);
        }

        

        // Analytics Dashboard
        function renderAnalytics() {
            renderSalesByCategoryChart();
            renderInventoryTurnoverChart();
        }

        function renderSalesByCategoryChart() {
            const ctx = document.getElementById('sales-by-category-chart').getContext('2d');
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Electronics', 'Clothing', 'Food', 'Books', 'Other'],
                    datasets: [{
                        data: [30, 25, 20, 15, 10],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.8)',
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(255, 206, 86, 0.8)',
                            'rgba(75, 192, 192, 0.8)',
                            'rgba(153, 102, 255, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    title: {
                        display: true,
                        text: 'Sales by Category'
                    }
                }
            });
        }

        function renderInventoryTurnoverChart() {
            const ctx = document.getElementById('inventory-turnover-chart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Electronics', 'Clothing', 'Food', 'Books', 'Other'],
                    datasets: [{
                        label: 'Inventory Turnover',
                        data: [3.5, 4.2, 5.1, 2.8, 3.9],
                        backgroundColor: 'rgba(75, 192, 192, 0.8)'
                    }]
                },
                options: {
                    responsive: true,
                    title: {
                        display: true,
                        text: 'Inventory Turnover by Category'
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Turnover Rate'
                            }
                        }
                    }
                }
            });
        }

        

        // Advanced Data Visualization
        function renderAdvancedCharts() {
            renderInventoryForecastChart();
            renderSupplierPerformanceChart();
        }

        function renderInventoryForecastChart() {
            const ctx = document.getElementById('inventory-forecast-chart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Actual Inventory',
                        data: [100, 120, 115, 130, 140, 135],
                        borderColor: 'rgba(75, 192, 192, 1)',
                        fill: false
                    }, {
                        label: 'Forecasted Inventory',
                        data: [100, 110, 120, 130, 140, 150],
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderDash: [5, 5],
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    title: {
                        display: true,
                        text: 'Inventory Forecast'
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Inventory Level'
                            }
                        }
                    }
                }
            });
        }

        function renderSupplierPerformanceChart() {
            const ctx = document.getElementById('supplier-performance-chart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Quality', 'On-time Delivery', 'Price', 'Communication', 'Flexibility'],
                    datasets: [{
                        label: 'Supplier A',
                        data: [4.5, 4.8, 4.2, 4.0, 3.8],
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        pointBackgroundColor: 'rgba(75, 192, 192, 1)'
                    }, {
                        label: 'Supplier B',
                        data: [3.8, 4.2, 4.5, 4.3, 4.1],
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        pointBackgroundColor: 'rgba(255, 99, 132, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    title: {
                        display: true,
                        text: 'Supplier Performance Comparison'
                    },
                    scale: {
                        ticks: {
                            beginAtZero: true,
                            max: 5
                        }
                    }
                }
            });
        }

        function renderInventoryABCAnalysisChart() {
            const ctx = document.getElementById('inventory-abc-analysis-chart').getContext('2d');
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['A Items', 'B Items', 'C Items'],
                    datasets: [{
                        data: [70, 20, 10],
                        backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56']
                    }]
                },
                options: {
                    responsive: true,
                    title: {
                        display: true,
                        text: 'Inventory ABC Analysis'
                    }
                }
            });
        }

        function renderInventoryAgingChart() {
            const ctx = document.getElementById('inventory-aging-chart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['0-30 days', '31-60 days', '61-90 days', '90+ days'],
                    datasets: [{
                        label: 'Inventory Value',
                        data: [50000, 30000, 15000, 5000],
                        backgroundColor: ['#4CAF50', '#FFC107', '#FF9800', '#F44336']
                    }]
                },
                options: {
                    responsive: true,
                    title: {
                        display: true,
                        text: 'Inventory Aging Analysis'
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display:true,
                                display: true,
                                text: 'Inventory Value ($)'
                            }
                        }
                    }
                }
            });
        }

        // Analytics Dashboard
        function renderAnalytics() {
            renderSalesByCategoryChart();
            renderInventoryTurnoverChart();
        }

        function renderSalesByCategoryChart() {
            const ctx = document.getElementById('sales-by-category-chart').getContext('2d');
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Electronics', 'Clothing', 'Food', 'Books', 'Other'],
                    datasets: [{
                        data: [30, 25, 20, 15, 10],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.8)',
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(255, 206, 86, 0.8)',
                            'rgba(75, 192, 192, 0.8)',
                            'rgba(153, 102, 255, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    title: {
                        display: true,
                        text: 'Sales by Category'
                    }
                }
            });
        }

        function renderInventoryTurnoverChart() {
            const ctx = document.getElementById('inventory-turnover-chart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Electronics', 'Clothing', 'Food', 'Books', 'Other'],
                    datasets: [{
                        label: 'Inventory Turnover',
                        data: [3.5, 4.2, 5.1, 2.8, 3.9],
                        backgroundColor: 'rgba(75, 192, 192, 0.8)'
                    }]
                },
                options: {
                    responsive: true,
                    title: {
                        display: true,
                        text: 'Inventory Turnover by Category'
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Turnover Rate'
                            }
                        }
                    }
                }
            });
        }

       
        // Initialize the app
        function initApp() {
            const hash = window.location.hash.slice(1);
            if (hash) {
                showPage('inventory-page');
            } else {
                showPage('inventory-page');
            }
            updateInventoryHistory();
            renderCharts();
            renderAdvancedCharts();
            renderChatMessages();
            initMap();
        }

        initApp();

    </script>
</body>
</html>
